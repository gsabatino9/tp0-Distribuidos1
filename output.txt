docker build -f ./server/Dockerfile -t "server:latest" .
docker build -f ./client/Dockerfile -t "client:latest" .
# Execute this command from time to time to clean up intermediate stages generated 
# during client build (your hard drive will like this :) ). Don't left uncommented if you 
# want to avoid rebuilding client image every time the docker-compose-up command 
# is executed, even when client code has not changed
# docker rmi `docker images --filter label=intermediateStageToBeDeleted=true -q`
docker compose -f docker-compose-dev.yaml up -d --build
docker compose -f docker-compose-dev.yaml logs -f
client3  | 2023-03-30 23:34:57 DEBUG    action: config | result: success | server_addr: server:12345 | logging_level: DEBUG
client3  | 2023-03-30 23:34:57 INFO     action: apuesta_enviada | result: success | dni: 63477287 | numero: 8256
client3  | 2023-03-30 23:34:57 DEBUG    action: close_resource | result: in_progress | resource: server_communication
client3  | 2023-03-30 23:34:57 DEBUG    action: close_resource | result: in_progress | resource: communication_socket
client3  | 2023-03-30 23:34:57 INFO     action: close_resource | result: success | resource: communication_socket
client3  | 2023-03-30 23:34:57 INFO     action: close_resource | result: success | resource: server_communication
client3  | 2023-03-30 23:34:57 INFO     action: end_client_loop | result: success
client1  | 2023-03-30 23:34:57 DEBUG    action: config | result: success | server_addr: server:12345 | logging_level: DEBUG
client1  | 2023-03-30 23:34:57 INFO     action: apuesta_enviada | result: success | dni: 51478246 | numero: 8564
client1  | 2023-03-30 23:34:57 DEBUG    action: close_resource | result: in_progress | resource: server_communication
client1  | 2023-03-30 23:34:57 DEBUG    action: close_resource | result: in_progress | resource: communication_socket
client1  | 2023-03-30 23:34:57 INFO     action: close_resource | result: success | resource: communication_socket
client1  | 2023-03-30 23:34:57 INFO     action: close_resource | result: success | resource: server_communication
client1  | 2023-03-30 23:34:57 INFO     action: end_client_loop | result: success
client2  | 2023-03-30 23:34:57 DEBUG    action: config | result: success | server_addr: server:12345 | logging_level: DEBUG
client2  | 2023-03-30 23:34:57 INFO     action: apuesta_enviada | result: success | dni: 49464135 | numero: 1114
client2  | 2023-03-30 23:34:57 DEBUG    action: close_resource | result: in_progress | resource: server_communication
client2  | 2023-03-30 23:34:57 DEBUG    action: close_resource | result: in_progress | resource: communication_socket
client2  | 2023-03-30 23:34:57 INFO     action: close_resource | result: success | resource: communication_socket
client2  | 2023-03-30 23:34:57 INFO     action: close_resource | result: success | resource: server_communication
client2  | 2023-03-30 23:34:57 INFO     action: end_client_loop | result: success
server   | 2023-03-30 23:34:56 DEBUG    action: config | result: success | port: 12345 | listen_backlog: 5 | logging_level: DEBUG
server   | 2023-03-30 23:34:56 INFO     action: accept_connections | result: in_progress
server   | 2023-03-30 23:34:57 INFO     action: accept_connections | result: success | ip: 172.25.125.3
server   | 2023-03-30 23:34:57 INFO     action: receive_message | result: success | ip: 172.25.125.3 | msg: {"type_message": 2, "agency": "1", "payload": ["Gonzalo Paula,Paredes,51478246,1971-12-11,8564"]}
server   | 2023-03-30 23:34:57 INFO     action: apuesta_almacenada | result: success | dni: 51478246 | numero: 8564
server   | 2023-03-30 23:34:57 DEBUG    action: close_resource | result: in_progress | resource: communication_socket
server   | 2023-03-30 23:34:57 INFO     action: close_resource | result: success | resource: communication_socket
server   | 2023-03-30 23:34:57 INFO     action: accept_connections | result: in_progress
server   | 2023-03-30 23:34:57 INFO     action: accept_connections | result: success | ip: 172.25.125.4
server   | 2023-03-30 23:34:57 INFO     action: receive_message | result: success | ip: 172.25.125.4 | msg: {"type_message": 2, "agency": "3", "payload": ["Lucas Gonzalo,Martinez,63477287,1960-10-20,8256"]}
server   | 2023-03-30 23:34:57 INFO     action: apuesta_almacenada | result: success | dni: 63477287 | numero: 8256
server   | 2023-03-30 23:34:57 DEBUG    action: close_resource | result: in_progress | resource: communication_socket
server   | 2023-03-30 23:34:57 INFO     action: close_resource | result: success | resource: communication_socket
server   | 2023-03-30 23:34:57 INFO     action: accept_connections | result: in_progress
server   | 2023-03-30 23:34:57 INFO     action: accept_connections | result: success | ip: 172.25.125.5
server   | 2023-03-30 23:34:57 INFO     action: receive_message | result: success | ip: 172.25.125.5 | msg: {"type_message": 2, "agency": "2", "payload": ["Gonzalo Manolo,Fernandez,49464135,1922-10-22,1114"]}
server   | 2023-03-30 23:34:57 INFO     action: apuesta_almacenada | result: success | dni: 49464135 | numero: 1114
server   | 2023-03-30 23:34:57 DEBUG    action: close_resource | result: in_progress | resource: communication_socket
server   | 2023-03-30 23:34:57 INFO     action: close_resource | result: success | resource: communication_socket
server   | 2023-03-30 23:34:57 INFO     action: accept_connections | result: in_progress
server   | 2023-03-30 23:34:57 INFO     action: accept_connections | result: success | ip: 172.25.125.6
server   | 2023-03-30 23:34:57 INFO     action: receive_message | result: success | ip: 172.25.125.6 | msg: {"type_message": 2, "agency": "5", "payload": ["Marta Manolo,Fernandez,64390247,1929-12-27,5121"]}
server   | 2023-03-30 23:34:57 INFO     action: apuesta_almacenada | result: success | dni: 64390247 | numero: 5121
server   | 2023-03-30 23:34:57 DEBUG    action: close_resource | result: in_progress | resource: communication_socket
server   | 2023-03-30 23:34:57 INFO     action: close_resource | result: success | resource: communication_socket
server   | 2023-03-30 23:34:57 INFO     action: accept_connections | result: in_progress
server   | 2023-03-30 23:34:57 INFO     action: accept_connections | result: success | ip: 172.25.125.7
server   | 2023-03-30 23:34:57 INFO     action: receive_message | result: success | ip: 172.25.125.7 | msg: {"type_message": 2, "agency": "4", "payload": ["Lionel Gonzalo,Paredes,48486156,1939-11-27,5592"]}
server   | 2023-03-30 23:34:57 INFO     action: apuesta_almacenada | result: success | dni: 48486156 | numero: 5592
server   | 2023-03-30 23:34:57 DEBUG    action: close_resource | result: in_progress | resource: communication_socket
server   | 2023-03-30 23:34:57 INFO     action: close_resource | result: success | resource: communication_socket
server   | 2023-03-30 23:34:57 INFO     action: accept_connections | result: in_progress
client5  | 2023-03-30 23:34:57 DEBUG    action: config | result: success | server_addr: server:12345 | logging_level: DEBUG
client5  | 2023-03-30 23:34:57 INFO     action: apuesta_enviada | result: success | dni: 64390247 | numero: 5121
client5  | 2023-03-30 23:34:57 DEBUG    action: close_resource | result: in_progress | resource: server_communication
client5  | 2023-03-30 23:34:57 DEBUG    action: close_resource | result: in_progress | resource: communication_socket
client5  | 2023-03-30 23:34:57 INFO     action: close_resource | result: success | resource: communication_socket
client5  | 2023-03-30 23:34:57 INFO     action: close_resource | result: success | resource: server_communication
client5  | 2023-03-30 23:34:57 INFO     action: end_client_loop | result: success
client4  | 2023-03-30 23:34:57 DEBUG    action: config | result: success | server_addr: server:12345 | logging_level: DEBUG
client4  | 2023-03-30 23:34:57 INFO     action: apuesta_enviada | result: success | dni: 48486156 | numero: 5592
client4  | 2023-03-30 23:34:57 DEBUG    action: close_resource | result: in_progress | resource: server_communication
client4  | 2023-03-30 23:34:57 DEBUG    action: close_resource | result: in_progress | resource: communication_socket
client4  | 2023-03-30 23:34:57 INFO     action: close_resource | result: success | resource: communication_socket
client4  | 2023-03-30 23:34:57 INFO     action: close_resource | result: success | resource: server_communication
client4  | 2023-03-30 23:34:57 INFO     action: end_client_loop | result: success
server   | 2023-03-30 23:35:00 INFO     action: signal_received | result: success | signal: SIGTERM
server   | 2023-03-30 23:35:00 DEBUG    action: close_resource | result: in_progress | resource: client_communication
server   | 2023-03-30 23:35:00 DEBUG    action: close_resource | result: in_progress | resource: communication_socket
server   | 2023-03-30 23:35:00 DEBUG    action: close_resource | result: success | resource: communication_socket | msg: socket already closed
server   | 2023-03-30 23:35:00 INFO     action: close_resource | result: success | resource: communication_socket
server   | 2023-03-30 23:35:00 INFO     action: close_resource | result: success | resource: client_communication
server   | 2023-03-30 23:35:00 DEBUG    action: close_resource | result: in_progress | resource: server_socket
server   | 2023-03-30 23:35:00 INFO     action: close_resource | result: success | resource: server_socket
server   | 2023-03-30 23:35:00 DEBUG    action: socket_closed | result: success
server exited with code 0
server exited with code 0
